---
title: "SDS 410"
subtitle: "StreetEasy"
author: "Dayana Meza"
date: "Thursday, March 4th, 2021"
output:
  pdf_document
---

```{r, include=FALSE}
# Load all packages here
library(ggplot2)
library(lubridate)
library(ical)
library(readr)
library(knitr)
library(tidytext)
library(tm)
library(dplyr)
library(stringr)
library(rpart.plot)
library(SnowballC)
data(stop_words)

# Load the data 
amenities <- read.csv("amenities.csv", stringsAsFactors = FALSE)
sale <- read.csv("sale_listings.csv", stringsAsFactors = FALSE)

```

# Main Question & Ojectives

## Can we use listing descriptions to predict home prices? 

- Can we convert the description text into meaningful features? 

- Can we use text-based features in addition to the existing features to predict home prices? 

-------------------------------------------------------

<!-- Load Data -->

```{r}
# Datasets 
data <- sale %>% 
  
#Uncomment to merge amenities and sale 
  #merge(sale,amenities,by="property_id") %>% 
  
  # select only descriptions for now
  select(listing_description) 
  
```

<!-- Clean Data -->
  <!-- reference: https://smltar.com/stemming.html --> 

```{r}
# Cleaning the Data: Removing Stop Words and Stemming
data <- data %>%
  unnest_tokens(word, listing_description) %>% 
  
  # Remove Stop Words (e.g., "the")
  anti_join(stop_words) %>% 
  count(word, sort = TRUE) %>% 
  
  # Stemming 
  mutate(stem = wordStem(word)) %>%
  count(stem, sort = TRUE)
```

<!-- Create Visualization of Frequency of Words --> 

```{r}
# Get top 5 frequent words
data_freq <- data %>%
  filter(row_number() <= 5)

# Build Viusalization
  # Arrange and make it blue!
ggplot(data = data_freq, aes(x = stem, y = n)) +
  geom_col() 
```

<!-- Build a Classification Model --> 

```{r}
# 
```